<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Alternate Morse</title>
<style>
body{
  background:#000;
  color:#0f0;
  font-family:monospace;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh
}
textarea,button{
  width:100%;
  background:#111;
  color:#0f0;
  border:1px solid #333;
  margin:6px 0;
  padding:8px
}
button{cursor:pointer}
</style>
</head>
<body>

<div style="width:520px">
<textarea id="inp" placeholder="input"></textarea>
<button onclick="enc()">ENCODE</button>
<button onclick="dec()">DECODE</button>
<textarea id="out" placeholder="output"></textarea>
</div>

<script>
// shift +7
const ca = (s,n)=>[...s].map(c=>{
  let x=c.charCodeAt(0)
  return (x>=32&&x<=126)
    ?String.fromCharCode((x-32+n+95)%95+32)
    :c
}).join("")

// safe base64
const b64 = s => btoa(unescape(encodeURIComponent(s)))
const ub64 = s => decodeURIComponent(escape(atob(s)))

// binary-morse (lossless)
const mor = s => [...s].map(c =>
  c.charCodeAt(0)
   .toString(2).padStart(8,"0")
   .replace(/0/g,".")
   .replace(/1/g,"-")
).join(" ")

const umor = s => s.split(" ").map(b =>
  String.fromCharCode(
    parseInt(b.replace(/\./g,"0").replace(/-/g,"1"),2)
  )
).join("")

function enc(){
  if(!inp.value){alert("no input");return}
  let t = inp.value
  t = ca(t,7)
  t = b64(t)
  t = mor(t)
  out.value = t
}

function dec(){
  if(!inp.value){alert("no input");return}
  let t = inp.value
  t = umor(t)
  t = ub64(t)
  t = ca(t,-7)
  out.value = t
}
</script>

</body>
</html>
